(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{5867:function(e,t,n){Promise.resolve().then(n.bind(n,149))},149:function(e,t,n){"use strict";n.d(t,{default:function(){return a}});var s=n(7437),r=n(2265);let l=["telegramId","name","isPremium","points","pointsBalance","multitapLevelIndex","energy","energyRefillsLeft","energyLimitLevelIndex","mineLevelIndex","lastPointsUpdateTimestamp","lastEnergyUpdateTimestamp","lastEnergyRefillsTimestamp","tonWalletAddress","referralPointsEarned","offlinePointsEarned"],o=()=>l.reduce((e,t)=>(e[t]=!1,e),{});function a(){let[e,t]=(0,r.useState)(o()),[n,a]=(0,r.useState)(!1),i=(0,r.useMemo)(()=>Object.values(e).some(e=>e),[e]),c=e=>{t(t=>({...t,[e]:!t[e]}))},d=async()=>{a(!0);let t=Object.entries(e).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t]=e;return t});try{let e=[],n=0,s=!0;for(;s;){let r=await fetch("/api/admin/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:t,page:n})});if(!r.ok)throw Error("Export failed");let l=await r.json();e=e.concat(l.users),s=l.hasMore,n++}let r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=window.URL.createObjectURL(r),o=document.createElement("a");o.style.display="none",o.href=l,o.download="users_export.json",document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(l)}catch(e){console.error("Export error:",e),alert("Export failed")}a(!1)};return(0,s.jsx)("div",{className:"min-h-screen bg-[#1d2025] text-white p-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-8 text-[#f3ba2f]",children:"Admin Panel"}),(0,s.jsxs)("div",{className:"bg-[#272a2f] rounded-lg p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Select fields to export:"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:l.map(t=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("div",{className:"w-5 h-5 mr-2 flex-shrink-0 relative",children:[(0,s.jsx)("input",{id:t,type:"checkbox",checked:e[t],onChange:()=>c(t),className:"w-full h-full rounded border-2 border-gray-400  appearance-none cursor-pointer checked:bg-[#f3ba2f] checked:border-[#f3ba2f] transition-colors duration-200 ease-in-out"}),(0,s.jsx)("svg",{className:"absolute w-4 h-4 top-0.5 left-0.5 pointer-events-none hidden checked:block stroke-black",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"20 6 9 17 4 12"})})]}),(0,s.jsx)("label",{htmlFor:t,className:"text-sm cursor-pointer truncate",children:t})]},t))}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{onClick:()=>{t(e=>Object.keys(e).reduce((e,t)=>(e[t]=!0,e),{}))},className:"bg-[#3a3d42] text-white px-4 py-2 rounded hover:bg-[#4a4d52] transition-colors",children:"Select All"}),(0,s.jsx)("button",{onClick:()=>{t(o())},className:"bg-[#3a3d42] text-white px-4 py-2 rounded hover:bg-[#4a4d52] transition-colors",children:"Deselect All"})]})]}),(0,s.jsx)("button",{onClick:d,disabled:n||!i,className:"bg-[#f3ba2f] text-black px-6 py-3 rounded-lg font-bold text-lg transition-colors \n                     ".concat(n||!i?"opacity-50 cursor-not-allowed":"hover:bg-[#f4c141]"),children:n?"Exporting...":"Export JSON"})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5867)}),_N_E=e.O()}]);